/**
 ******************************************************************************
 *  file           : victron.h
 *  brief          : Defines and stuff for Victron devices
 ******************************************************************************
 *  Copyright (C) 2024 Florian Brandner
 *
 * Some stuff taken from Fabian Schmidts esphome component. See
 * https://github.com/Fabian-Schmidt/esphome-victron_ble
 *
 */

#ifndef __VICTRON_H_
#define __VICTRON_H_

#ifdef __cplusplus
extern "C" {
#endif

#include "stdint.h"

// Struct of the manufacturer data
typedef struct {
  uint8_t manu_record_type;   // Should always be 0x10
  uint8_t manu_record_length; //
  uint16_t product_id;        // The 2-Byte product ID
  uint8_t record_type;        // Record type
  uint16_t data_counter;      // Data counter / Nonce
  uint8_t key_b0;             // Byte 0 of encryption key
} victron_t;

#define MANUFACTURER_RTYPE 0x10
#define MANUFACTURER_ID 0x02E1

// The Product IDs
#define PID_BLUESOLAR_MPPT_100_15 0XA043
#define PID_BLUESOLAR_MPPT_100_20 0XA066
#define PID_BLUESOLAR_MPPT_100_20_48V 0XA067
#define PID_BLUESOLAR_MPPT_100_30_REV2 0XA04A
#define PID_BLUESOLAR_MPPT_100_50_REV2 0XA049
#define PID_BLUESOLAR_MPPT_150_100 0XA047
#define PID_BLUESOLAR_MPPT_150_35_REV2 0XA04B
#define PID_BLUESOLAR_MPPT_150_45 0XA04D
#define PID_BLUESOLAR_MPPT_150_45_REV2 0XA06F
#define PID_BLUESOLAR_MPPT_150_60 0XA04E
#define PID_BLUESOLAR_MPPT_150_60_REV2 0XA070
#define PID_BLUESOLAR_MPPT_150_70 0XA046
#define PID_BLUESOLAR_MPPT_150_70_REV2 0XA071
#define PID_BLUESOLAR_MPPT_150_85 0XA04F
#define PID_BLUESOLAR_MPPT_75_10 0XA04C
#define PID_BLUESOLAR_MPPT_75_15 0XA042
#define PID_BLUESOLAR_MPPT_VE_CAN_150_100 0XA10F
#define PID_BLUESOLAR_MPPT_VE_CAN_250_100 0XA113
#define PID_BLUESOLAR_MPPT_VE_CAN_250_70 0XA112
#define PID_BMV_700 0X0203
#define PID_BMV_700H 0X0205
#define PID_BMV_702 0X0204
#define PID_PHOENIX_INVERTER_12V_1200VA_120V 0XA279
#define PID_PHOENIX_INVERTER_12V_1200VA_230V 0XA271
#define PID_PHOENIX_INVERTER_12V_1600VA_230V 0XA281
#define PID_PHOENIX_INVERTER_12V_2000VA_230V 0XA291
#define PID_PHOENIX_INVERTER_12V_250VA_120V 0XA239
#define PID_PHOENIX_INVERTER_12V_250VA_230V 0XA231
#define PID_PHOENIX_INVERTER_12V_3000VA_230V 0XA2A1
#define PID_PHOENIX_INVERTER_12V_375VA_120V 0XA249
#define PID_PHOENIX_INVERTER_12V_375VA_230V 0XA241
#define PID_PHOENIX_INVERTER_12V_500VA_120V 0XA259
#define PID_PHOENIX_INVERTER_12V_500VA_230V 0XA251
#define PID_PHOENIX_INVERTER_12V_800VA_120V 0XA269
#define PID_PHOENIX_INVERTER_12V_800VA_230V 0XA261
#define PID_PHOENIX_INVERTER_24V_1200VA_120V 0XA27A
#define PID_PHOENIX_INVERTER_24V_1200VA_230V 0XA272
#define PID_PHOENIX_INVERTER_24V_1600VA_230V 0XA282
#define PID_PHOENIX_INVERTER_24V_2000VA_230V 0XA292
#define PID_PHOENIX_INVERTER_24V_250VA_120V 0XA23A
#define PID_PHOENIX_INVERTER_24V_250VA_230V 0XA232
#define PID_PHOENIX_INVERTER_24V_3000VA_230V 0XA2A2
#define PID_PHOENIX_INVERTER_24V_375VA_120V 0XA24A
#define PID_PHOENIX_INVERTER_24V_375VA_230V 0XA242
#define PID_PHOENIX_INVERTER_24V_500VA_120V 0XA25A
#define PID_PHOENIX_INVERTER_24V_500VA_230V 0XA252
#define PID_PHOENIX_INVERTER_24V_800VA_120V 0XA26A
#define PID_PHOENIX_INVERTER_24V_800VA_230V 0XA262
#define PID_PHOENIX_INVERTER_48V_1200VA_120V 0XA27C
#define PID_PHOENIX_INVERTER_48V_1200VA_230V 0XA274
#define PID_PHOENIX_INVERTER_48V_1600VA_230V 0XA284
#define PID_PHOENIX_INVERTER_48V_2000VA_230V 0XA294
#define PID_PHOENIX_INVERTER_48V_250VA_120V 0XA23C
#define PID_PHOENIX_INVERTER_48V_250VA_230V 0XA234
#define PID_PHOENIX_INVERTER_48V_3000VA_230V 0XA2A4
#define PID_PHOENIX_INVERTER_48V_375VA_120V 0XA24C
#define PID_PHOENIX_INVERTER_48V_375VA_230V 0XA244
#define PID_PHOENIX_INVERTER_48V_500VA_120V 0XA25C
#define PID_PHOENIX_INVERTER_48V_500VA_230V 0XA254
#define PID_PHOENIX_INVERTER_48V_800VA_120V 0XA26C
#define PID_PHOENIX_INVERTER_48V_800VA_230V 0XA264
#define PID_PHOENIX_INVERTER_SMART_IP43_CHARGER_12_30 0XA344
#define PID_PHOENIX_INVERTER_SMART_IP43_CHARGER_12_30_3 0XA345
#define PID_PHOENIX_INVERTER_SMART_IP43_CHARGER_12_50 0XA340
#define PID_PHOENIX_INVERTER_SMART_IP43_CHARGER_12_50_3 0XA341
#define PID_PHOENIX_INVERTER_SMART_IP43_CHARGER_24_16 0XA346
#define PID_PHOENIX_INVERTER_SMART_IP43_CHARGER_24_16_3 0XA347
#define PID_PHOENIX_INVERTER_SMART_IP43_CHARGER_24_50 0XA342
#define PID_PHOENIX_INVERTER_SMART_IP43_CHARGER_24_50_3 0XA343
#define PID_SMARTSHUNT_500A_50MV 0XA389
#define PID_SMARTSOLAR_MPPT_100_15 0XA055
#define PID_SMARTSOLAR_MPPT_100_20 0XA05F
#define PID_SMARTSOLAR_MPPT_100_20_48V 0XA060
#define PID_SMARTSOLAR_MPPT_100_30 0XA056
#define PID_SMARTSOLAR_MPPT_100_50 0XA057
#define PID_SMARTSOLAR_MPPT_150_100_REV2 0XA059
#define PID_SMARTSOLAR_MPPT_150_100_REV3 0XA06E
#define PID_SMARTSOLAR_MPPT_150_35 0XA058
#define PID_SMARTSOLAR_MPPT_150_45 0XA061
#define PID_SMARTSOLAR_MPPT_150_45_REV2 0XA06A
#define PID_SMARTSOLAR_MPPT_150_60 0XA062
#define PID_SMARTSOLAR_MPPT_150_60_REV2 0XA06B
#define PID_SMARTSOLAR_MPPT_150_70 0XA063
#define PID_SMARTSOLAR_MPPT_150_70_REV2 0XA06C
#define PID_SMARTSOLAR_MPPT_150_85_REV2 0XA05A
#define PID_SMARTSOLAR_MPPT_150_85_REV3 0XA06D
#define PID_SMARTSOLAR_MPPT_250_100 0XA050
#define PID_SMARTSOLAR_MPPT_250_100_REV2 0XA065
#define PID_SMARTSOLAR_MPPT_250_45 0XA05E
#define PID_SMARTSOLAR_MPPT_250_60 0XA05D
#define PID_SMARTSOLAR_MPPT_250_60_REV2 0XA068
#define PID_SMARTSOLAR_MPPT_250_70 0XA05B
#define PID_SMARTSOLAR_MPPT_250_70_REV2 0XA069
#define PID_SMARTSOLAR_MPPT_250_85 0XA05C
#define PID_SMARTSOLAR_MPPT_250_85_REV2 0XA064
#define PID_SMARTSOLAR_MPPT_75_10 0XA054
#define PID_SMARTSOLAR_MPPT_75_15 0XA053
#define PID_SMARTSOLAR_MPPT_VE_CAN_150_100 0XA106
#define PID_SMARTSOLAR_MPPT_VE_CAN_150_100_REV2 0XA10E
#define PID_SMARTSOLAR_MPPT_VE_CAN_150_45 0XA103
#define PID_SMARTSOLAR_MPPT_VE_CAN_150_60 0XA104
#define PID_SMARTSOLAR_MPPT_VE_CAN_150_70 0XA102
#define PID_SMARTSOLAR_MPPT_VE_CAN_150_70_REV2 0XA10C
#define PID_SMARTSOLAR_MPPT_VE_CAN_150_85 0XA105
#define PID_SMARTSOLAR_MPPT_VE_CAN_150_85_REV2 0XA10D
#define PID_SMARTSOLAR_MPPT_VE_CAN_250_100 0XA10B
#define PID_SMARTSOLAR_MPPT_VE_CAN_250_100_REV2 0XA115
#define PID_SMARTSOLAR_MPPT_VE_CAN_250_45 0XA107
#define PID_SMARTSOLAR_MPPT_VE_CAN_250_60 0XA108
#define PID_SMARTSOLAR_MPPT_VE_CAN_250_70 0XA109
#define PID_SMARTSOLAR_MPPT_VE_CAN_250_70_REV2 0XA114
#define PID_SMARTSOLAR_MPPT_VE_CAN_250_85 0XA10A
#define PID_SMARTSOLAR_MPPT_VE_CAN_250_85_REV2 0XA116

// The Record Types
#define RTYPE_TEST_RECORD 0x00
#define RTYPE_SOLAR_CHARGER 0x01
#define RTYPE_BATTERY_MONITOR 0x02
#define RTYPE_INVERTER 0x03
#define RTYPE_DCDC_CONVERTER 0x04
#define RTYPE_SMART_LITHIUM 0x05
#define RTYPE_INVERTER_RS 0x06
#define RTYPE_GX_DEVICE 0x07
#define RTYPE_AC_CHARGER 0x08
#define RTYPE_SMART_BATTERY_PROTECT 0x09
#define RTYPE_LYNX_SMART_BMS 0x0A
#define RTYPE_MULTI_RS 0x0B
#define RTYPE_VE_BUS 0x0C
#define RTYPE_DC_ENERGY_METER 0x0D
#define RTYPE_ORION_XS 0x0F

#ifdef __cplusplus
}
#endif

#endif // __VICTRON_H_
